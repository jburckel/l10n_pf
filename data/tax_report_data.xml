<?xml version="1.0" encoding="utf-8"?>
<odoo auto_sequence="1">
    <record id="tax_report" model="account.report">
        <field name="name">Tax Report</field>
        <field name="root_report_id" ref="account.generic_tax_report"/>
        <field name="country_id" ref="base.pf"/>
        <field name="filter_fiscal_position" eval="True"/>
        <field name="availability_condition">country</field>
        <field name="column_ids">
            <record id="tax_report_base" model="account.report.column">
                <field name="name">Balance</field>
                <field name="expression_label">balance</field>
            </record>
        </field>
        <field name="line_ids">
            <record id="tax_report_A_montant_op_realisees" model="account.report.line">
                <field name="name">A - OPERATIONS REALISEES</field>
                <field name="hierarchy_level">0</field>
                <field name="children_ids">
                    <record id="tax_report_A01_op_imposables_ht" model="account.report.line">
                        <field name="name">Montant des opérations imposables Hors TVA</field>
                        <field name="children_ids">
                            <record id="tax_report_01" model="account.report.line">
                                <field name="name">01 - Ventes</field>
                                <field name="code">box_01</field>
                                <field name="expression_ids">
                                    <record id="tax_report_01_tag" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">tax_tags</field>
                                        <field name="formula">A01</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_02" model="account.report.line">
                                <field name="name">02 - Prestations de services</field>
                                <field name="code">box_02</field>
                                <field name="expression_ids">
                                    <record id="tax_report_02_tag" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">tax_tags</field>
                                        <field name="formula">A02</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_A03_op_non_imposables" model="account.report.line">
                        <field name="name">Montant des opérations non imposables</field>
                        <field name="children_ids">
                            <record id="tax_report_03" model="account.report.line">
                                <field name="name">03 - Exportations</field>
                                <field name="code">box_03</field>
                                <field name="expression_ids">
                                    <record id="tax_report_03_tag" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">tax_tags</field>
                                        <field name="formula">A03</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_04" model="account.report.line">
                                <field name="name">04 - Autres opérations non taxables</field>
                                <field name="code">box_04</field>
                                <field name="expression_ids">
                                    <record id="tax_report_04_tag" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">tax_tags</field>
                                        <field name="formula">A04</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>
            <record id="tax_report_B_tva_exigible" model="account.report.line">
                <field name="name">B - TVA EXIGIBLE</field>
                <field name="hierarchy_level">0</field>
                <field name="children_ids">
                    <record id="tax_report_B_tva_brute" model="account.report.line">
                        <field name="name">Opérations imposables (lignes 1 à 2)</field>
                    </record>
                    <record id="tax_report_B05_tva_reduite" model="account.report.line">
                        <field name="name">Taux réduit 5%</field>
                        <field name="children_ids">
                            <record id="tax_report_05_base" model="account.report.line">
                                <field name="name">Base Hors TVA</field>
                                <field name="code">box_05_base</field>
                                <field name="expression_ids">
                                    <record id="tax_report_05_base_tag" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">tax_tags</field>
                                        <field name="formula">B05_base</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_05_taxe" model="account.report.line">
                                <field name="name">TVA due</field>
                                <field name="code">box_05_taxe</field>
                                <field name="expression_ids">
                                    <record id="tax_report_05_taxe_tag" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">aggregation</field>
                                        <field name="formula">box_05_base.balance * 0.05</field>
                                    </record>
                                    <record id="tax_report_05_taxe_tag_no_rounding" model="account.report.expression">
                                        <field name="label">balance_from_tags</field>
                                        <field name="engine">tax_tags</field>
                                        <field name="formula">B05_taxe</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_B06_tva_intermediaire" model="account.report.line">
                        <field name="name">Taux intermédiaire 13%</field>
                        <field name="children_ids">
                            <record id="tax_report_06_base" model="account.report.line">
                                <field name="name">Base Hors TVA</field>
                                <field name="code">box_06_base</field>
                                <field name="expression_ids">
                                    <record id="tax_report_06_base_tag" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">tax_tags</field>
                                        <field name="formula">B06_base</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_06_taxe" model="account.report.line">
                                <field name="name">TVA due</field>
                                <field name="code">box_06_taxe</field>
                                <field name="expression_ids">
                                    <record id="tax_report_06_taxe_tag" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">aggregation</field>
                                        <field name="formula">box_06_base.balance * 0.13</field>
                                    </record>
                                    <record id="tax_report_06_taxe_tag_no_rounding" model="account.report.expression">
                                        <field name="label">balance_from_tags</field>
                                        <field name="engine">tax_tags</field>
                                        <field name="formula">B06_taxe</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_B07_tva_normal" model="account.report.line">
                        <field name="name">Taux normal 16%</field>
                        <field name="children_ids">
                            <record id="tax_report_07_base" model="account.report.line">
                                <field name="name">Base Hors TVA</field>
                                <field name="code">box_07_base</field>
                                <field name="expression_ids">
                                    <record id="tax_report_07_base_tag" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">tax_tags</field>
                                        <field name="formula">B07_base</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_07_taxe" model="account.report.line">
                                <field name="name">TVA due</field>
                                <field name="code">box_07_taxe</field>
                                <field name="expression_ids">
                                    <record id="tax_report_07_taxe_tag" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">aggregation</field>
                                        <field name="formula">box_07_base.balance * 0.16</field>
                                    </record>
                                    <record id="tax_report_07_taxe_tag_no_rounding" model="account.report.expression">
                                        <field name="label">balance_from_tags</field>
                                        <field name="engine">tax_tags</field>
                                        <field name="formula">B07_taxe</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_B08_tva_regularisation" model="account.report.line">
                        <field name="name">Régularisation : autre TVA à reverser</field>
                        <field name="children_ids">
                            <record id="tax_report_08_base" model="account.report.line">
                                <field name="name">Base Hors TVA</field>
                                <field name="code">box_08_base</field>
                                <field name="expression_ids">
                                    <record id="tax_report_08_base_tag" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">tax_tags</field>
                                        <field name="formula">B08_base</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_08_taxe" model="account.report.line">
                                <field name="name">TVA due</field>
                                <field name="code">box_08_taxe</field>
                                <field name="expression_ids">
                                    <record id="tax_report_08_taxe_tag" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">tax_tags</field>
                                        <field name="formula">B08_taxe</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_B09_tva_exigible_total" model="account.report.line">
                        <field name="name">Total (lignes 05 à 08)</field>
                        <field name="children_ids">
                            <record id="tax_report_09" model="account.report.line">
                                <field name="name">TVA due</field>
                                <field name="code">box_09</field>
                                <field name="expression_ids">
                                    <record id="tax_report_09_tag" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">aggregation</field>
                                        <field name="formula">boxe_05_taxe.balance + boxe_06_taxe.balance + boxe_07_taxe.balance + boxe_08_taxe.balance</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>
        </field>
    </record>
</odoo>
